###### LLM 설정 ######
VLLM_BASE_URL=http://localhost:8000/v1
VLLM_API_KEY=no-key-needed
VLLM_MODEL=openai/gpt-oss-20b

###### gpt-oss-20b 모델의 최대 한계(16k 토큰) 내에서 대화가 끊기지 않도록 관리하는 설정 ######
# 도구(cat, grep 등)가 출력하는 결과값의 최대 문자수입니다.
# 파일 내용이 너무 길면 모델의 컨텍스트를 한 번에 채워버려 오류가 발생하므로, 해당 값으로 잘라 모델이 핵심 내용만 보게 합니다.
VLLM_MAX_OUTPUT_CHARS=5000
# 전체 대화 내용 중 최근 몇 개의 턴(대화 쌍)을 기억할지 결정합니다.
# 토큰 제한이 엄격한 모델 특성상, 너무 오래된 대화는 버리고 최근 해당 턴의 문맥만 유지하여 성능을 최적화합니다.
VLLM_MAX_HISTORY_TURNS=20
# 사용 중인 모델의 최대 토큰 수용량(16k)을 의미합니다. 시스템이 내부적으로 컨텍스트가 꽉 찼는지 판단하는 기준점이 됩니다.
VLLM_MAX_MODEL_LEN=16384
# 모델이 한 번의 답변에서 생성할 수 있는 최대 토큰 수입니다. 답변이 너무 길어져 컨텍스트를 초과하거나 무한 루프에 빠지는 것을 방지합니다.
VLLM_MAX_TOKENS=4096
# 컨텍스트 초과 오류 발생 시, 시스템은 아주 최소한의 히스토리만 가지고 재시도합니다. 이때는 더 안전하게 해당 토큰 내로 답변하도록 제한을 더 강화합니다.
VLLM_RETRY_MAX_TOKENS=1500


###### Sub-task (Delegation) Settings ######
VLLM_SUBTASK_MAX_STEPS=30
VLLM_SUBTASK_HISTORY_DEPTH=10
VLLM_SUBTASK_MAX_TOKENS=3000
VLLM_SUBTASK_TOOL_RES_TRUNC_LIMIT=3000

###### 에이전트가 똑같은 행동을 반복하거나, 목적 없이 계속 실행되는 것을 방지하는 논리적 제약 사항입니다. ######
# 에이전트가 해당 턴을 넘기면 "이제 조만간 종료해야 하니 결과를 정리하라"는 경고 메시지를 시스템이 주입합니다.
VLLM_TURN_WARNING_THRESHOLD=40
# 동일한 도구를 동일한 인자로 해당 횟 수 초과하여 호출하면 "무한 루프"로 간주하고 차단합니다. 에이전트가 막혔을 때 다른 방법을 찾도록 유도합니다.
VLLM_MAX_REPEATED_TOOL_CALLS=3
# 하나의 에이전트가 다른 하위 에이전트(Task 도구)를 부를 수 있는 최대 횟수입니다. 대리 호출이 꼬리에 꼬리를 물어 자원을 낭비하는 것을 막습니다.
VLLM_MAX_TASK_DELEGATIONS=20
# 모델이 답변으로 "Done"이나 "Finished"라고 할 때, 답변 길이가 해당 숫자 미만일 때만 실제 종료로 인식합니다. 긴 설명 속에 우연히 포함된 단어에 의해 종료되는 오작동을 방지합니다.
VLLM_DONE_DETECTION_LENGTH=50

###### 전체적인 에이전트 실행 환경에 대한 설정입니다. ######
# 에이전트 1개당 허용되는 절대적인 최대 턴 수입니다. 해당 턴이 넘으면 성과와 상관없이 세션을 강제 종료하여 무한 실행을 막습니다.
SHANNON_AGENT_MAX_TURNS=120
# 모델이 복잡한 분석을 하느라 답변이 늦어질 때, 해당 초(ms)마다 "아직 실행 중"이라는 로그를 남겨 사용자가 시스템이 멈춘 것으로 오해하지 않게 합니다.
SHANNON_HEARTBEAT_INTERVAL_MS=30000

###### 개별 스캐닝 도구들의 타임아웃 설정입니다. ######
# 웹 서버 기술 스택을 확인하는 WhatWeb 도구가 연결을 시도할 때 기다리는 시간(초)입니다.
SHANNON_WHATWEB_OPEN_TIMEOUT=30
# 연결 후 데이터를 읽어올 때 기다리는 최대 시간(초)입니다. 대상 서버가 느릴 경우를 대비해 설정합니다.
SHANNON_WHATWEB_READ_TIMEOUT=60
# API 스캐닝 도구가 해당 횟수 이상 실패하면 해당 엔드포인트 테스트를 중단하고 다음으로 넘어갑니다.
SHANNON_SCHEMATHESIS_MAX_FAILURES=5

###### API 통신이나 네트워크 오류 발생 시 재시도 전략입니다. ######
# 오류 발생 시 첫 번째 재시도 전 대기하는 기본 시간(ms)입니다. 이후 지수 백오프(Exponential Backoff) 방식으로 늘어납니다.
SHANNON_RETRY_BASE_DELAY_MS=1000
# 아무리 재시도를 많이 해도 최대 대기 시간은 해당 초(ms)를 넘지 않도록 설정하여, 전체 파이프라인이 너무 오래 멈춰있는 것을 방지합니다.
SHANNON_RETRY_MAX_DELAY_MS=30000
